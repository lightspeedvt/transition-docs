<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Modules - LightSpeed VT</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">LightSpeed VT</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li >
                    <a href="../../boilerplate/">Boilerplate</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Blue Steel <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../overview/">Introduction</a>
                        </li>
                    
                        <li >
                            <a href="../configuration/">Configuration</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Modules</a>
                        </li>
                    
                        <li >
                            <a href="../resources/">Resources</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../configuration/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../resources/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#modules">Modules</a></li>
        
            <li><a href="#convention-over-configuration">Convention Over Configuration</a></li>
        
            <li><a href="#configuring-modules">Configuring Modules</a></li>
        
            <li><a href="#defining-a-module">Defining a Module</a></li>
        
            <li><a href="#configuring-the-viewmodel">Configuring The ViewModel</a></li>
        
            <li><a href="#configuring-the-view">Configuring The View</a></li>
        
            <li><a href="#anatomy-of-a-view">Anatomy of a View</a></li>
        
            <li><a href="#loading-view-specific-assets">Loading View-Specific Assets</a></li>
        
            <li><a href="#extending-viewmodels">Extending ViewModels</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="modules">Modules</h1>
<p>A "module" is composed of a viewmodel and view. In the application, modules are typically top-level only and control or compose their own children/submodules.</p>
<hr />
<h3 id="convention-over-configuration">Convention Over Configuration</h3>
<p>Modules are composed by the application at run-time based on a few factors:  </p>
<ul>
<li><code>modules</code> Configuration Object</li>
<li>URL/Deeplink Value</li>
<li>"Theme" Path</li>
</ul>
<hr />
<h3 id="configuring-modules">Configuring Modules</h3>
<p>The <a href="../configuration">JSON configuration</a> contains a <code>modules</code> property that looks like this:</p>
<pre><code class="json">    &quot;modules&quot;: {
        &quot;trainingcenter&quot;: {
            &quot;category&quot;: {
                &quot;version&quot;: &quot;5.216.0&quot;,
                &quot;name&quot;: &quot;category-redux&quot;
            }
            ...
        }
    }
</code></pre>

<p><br></p>
<p><strong>Module Configuration Attributes:</strong>  </p>
<ul>
<li>
<p><strong>Path</strong><br />
The <strong>path</strong> to the config object is related directly to the url routing system. In the example above, when the url <code>#/trainingcenter/category</code> is accessed, the "category" module will be loaded and displayed.  </p>
</li>
<li>
<p><strong>Version</strong><br />
The <code>version</code> property is appended to all asset requests and serves to "cache-bust" files. It's <strong>vitally important</strong> that you update this value when releasing updates to production. Failure to do so could cause errors for users that have the previous version cached.  </p>
</li>
<li>
<p><strong>Name</strong><br />
The <code>name</code> property allows the application to load files that are not directly correlated to the module name. This is helpful when you want to load a different module based on server-side logic. The current example would be the "topic style" categories menu which is used on a per client basis.</p>
</li>
</ul>
<hr />
<h3 id="defining-a-module">Defining a Module</h3>
<p>When the application's url is changed it will look for a corresponding module definition based on the configuration. If the module has not been defined it will attempt to load a javascript file from the <code>js/modules</code> directory.  </p>
<p>Building off of our configuration above, that file would be: <code>js/modules/trainingcenter/category.js</code>.  </p>
<p>Inside <code>category.js</code> we will define the module like so:</p>
<pre><code class="js">defineModule( &quot;trainingcenter/category&quot;, function( app, model ) {
    // Any methods or properties that you add to the &quot;model&quot; instance here
    // will be available to your view for data-binding
}
</code></pre>

<hr />
<h3 id="configuring-the-viewmodel">Configuring The ViewModel</h3>
<p>The <code>model</code> argument contains your viewmodel instance. The following methods are predefined and should be overridden in order for you module to work:</p>
<pre><code class="js">model.initialize = function(deeplink) {
    // This method is called before the module is rendered and is typically
    // used to load a resource and configure the view model
    // The &quot;deeplink&quot; argument is an array of the url parts *after* the module name
    // If we accessed #/trainingcenter/category/foo/bar it would be ['foo','bar']
};

model.onDeeplink = function(deeplink) {
    // This method is called if the url is changed after rendering
    // AND the module name/path does NOT change
    // Based on the code above the change could be #/trainingcenter/category/new/deeplink
};

// This method should be called once your configuration and any
// additional assets have been fully loaded.
// It supports a float value from 0-1 and can be used for preloading
model.setPercentLoaded(1);
</code></pre>

<hr />
<h3 id="configuring-the-view">Configuring The View</h3>
<p>Views are HTML fragments that are bound to the ViewModel and rendered to the page. The JSON configuration contains a <code>themes</code> property that looks like this:</p>
<pre><code class="json">    &quot;themes&quot;: {
        &quot;default&quot;: {
            &quot;path&quot;: &quot;themes/lsvt/&quot;
            ...
        }
    }
</code></pre>

<p>The active theme is set to "default" unless specified in the <code>data-theme</code> attribute of the <code>&lt;script&gt;</code> tag. See the <a href="../overview/#initialization">Overview Page</a> for more information.  </p>
<p>Once the active theme has been determined the application will load your views from the <code>path</code> property. This allows you to create a completely new front end while using the core of the application logic and module definitions.  </p>
<p>The convention used to locate views is <code>theme path + module name + .html</code> which would cause our "category" example to be located here: <code>themes/lsvt/trainingcenter/category.html</code></p>
<hr />
<h3 id="anatomy-of-a-view">Anatomy of a View</h3>
<p>Views are simply HTML using Knockout's template syntax. They are bound to the viewmodel and have access to its methods and properties.</p>
<blockquote>
<p>Running through <a href="http://learn.knockoutjs.com">http://learn.knockoutjs.com</a> can help you learn the syntax and better understand templates.</p>
</blockquote>
<hr />
<h3 id="loading-view-specific-assets">Loading View-Specific Assets</h3>
<p>Views also provide a special "preload" comment that allows you to preload files related to your view. These files can be anything YepNope supports, images, css, javascript etc. You'll need to place it on the first line of your template like so:</p>
<pre><code class="html">&lt;!-- preload: assets/category.js, assets/category.css --&gt;
</code></pre>

<p>Note that any images within the css files will be preloaded as well and your module will not be rendered until this process has been completed. Paths are relative to the current template's location.  </p>
<hr />
<h3 id="extending-viewmodels">Extending ViewModels</h3>
<p>Views should load an additional .js file (via the preload comment) that will extend/decorate the viewmodel. The intention here is that views should be animated and will need to notify the application when they are complete.</p>
<pre><code class="js">(function(){
    var app = lsvt.core.Application.getInstance(); // Get the app instance
    var view = new lsvt.core.View(&quot;trainingcenter/category&quot;); // Create a view instance
    var model = app.getModel( &quot;trainingcenter/topics&quot; ); // Get the viewmodel instance

    // Add methods, etc to the viewmodel
    model.myViewSpecificFunctionality = function() {
        $('.someViewElement').doSomethingSpecial();
    };

    view.rendered.add(function(){
        // Do some transitioning in, or target specific elements
    });

    view.ended.add(function(){
        // Do some transitioning out, or cleaning up then
        view.complete();
    });

})();

</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>